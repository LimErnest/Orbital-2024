"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[415],{1647:function(e,a,s){s.d(a,{Avatar:function(){return i},AvatarFallback:function(){return c},AvatarImage:function(){return d}});var t=s(7437),l=s(2265),r=s(4458),n=s(7440);let i=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(r.fC,{ref:a,className:(0,n.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...l})});i.displayName=r.fC.displayName;let d=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(r.Ee,{ref:a,className:(0,n.cn)("aspect-square h-full w-full",s),...l})});d.displayName=r.Ee.displayName;let c=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(r.NY,{ref:a,className:(0,n.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...l})});c.displayName=r.NY.displayName},6013:function(e,a,s){s.d(a,{Ol:function(){return i},SZ:function(){return c},Zb:function(){return n},aY:function(){return o},eW:function(){return h},ll:function(){return d}});var t=s(7437),l=s(2265),r=s(7440);let n=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)("div",{ref:a,className:(0,r.cn)("rounded-xl border bg-card text-card-foreground shadow",s),...l})});n.displayName="Card";let i=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)("div",{ref:a,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",s),...l})});i.displayName="CardHeader";let d=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)("h3",{ref:a,className:(0,r.cn)("font-semibold leading-none tracking-tight",s),...l})});d.displayName="CardTitle";let c=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)("p",{ref:a,className:(0,r.cn)("text-sm text-muted-foreground",s),...l})});c.displayName="CardDescription";let o=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)("div",{ref:a,className:(0,r.cn)("p-6 pt-0",s),...l})});o.displayName="CardContent";let h=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)("div",{ref:a,className:(0,r.cn)("flex items-center p-6 pt-0",s),...l})});h.displayName="CardFooter"},9415:function(e,a,s){s.d(a,{Sidebar:function(){return J},SidebarSection:function(){return W}});var t=s(7437),l=s(2265),r=s(7138),n=s(6648),i=s(7440),d=s(1647),c=s(1332),o=s(7025);let h=c.fC,u=c.xz,m=c.h_;c.x8;let x=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(c.aV,{ref:a,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...l})});x.displayName=c.aV.displayName;let f=l.forwardRef((e,a)=>{let{className:s,children:l,...r}=e;return(0,t.jsxs)(m,{children:[(0,t.jsx)(x,{}),(0,t.jsxs)(c.VY,{ref:a,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...r,children:[l,(0,t.jsxs)(c.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,t.jsx)(o.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});f.displayName=c.VY.displayName;let j=e=>{let{className:a,...s}=e;return(0,t.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...s})};j.displayName="DialogHeader";let g=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(c.Dx,{ref:a,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",s),...l})});g.displayName=c.Dx.displayName;let p=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(c.dk,{ref:a,className:(0,i.cn)("text-sm text-muted-foreground",s),...l})});p.displayName=c.dk.displayName;var N=s(495),b=s(510),v=s(3595),w=s(6463),y=s(8969),k=s(3705),C=s(6013),A=s(4510);let F=A.fC,G=A.xz,S=l.forwardRef((e,a)=>{let{className:s,align:l="center",sideOffset:r=4,...n}=e;return(0,t.jsx)(A.VY,{ref:a,align:l,sideOffset:r,className:(0,i.cn)("z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...n})});async function z(e){let a=(0,k.JU)(y.db,"badges",e),s=await (0,k.QT)(a);if(!s.exists())return console.log("No such document!"),{chess50Guide:!1,chess100Guide:!1,chessFinalQuest:!1,mahjong50Guide:!1,mahjong100Guide:!1,mahjongFinalQuest:!1,poker50Guide:!1,poker100Guide:!1,pokerFinalQuest:!1};{let e=s.data();return{chess50Guide:e.chess50Guide,chess100Guide:e.chess100Guide,chessFinalQuest:e.chessFinalQuest,mahjong50Guide:e.mahjong50Guide,mahjong100Guide:e.mahjong100Guide,mahjongFinalQuest:e.mahjongFinalQuest,poker50Guide:e.poker50Guide,poker100Guide:e.poker100Guide,pokerFinalQuest:e.pokerFinalQuest}}}function I(){let{user:e}=(0,b.a)(),[a,s]=(0,l.useState)({chess50Guide:!1,chess100Guide:!1,chessFinalQuest:!1,mahjong50Guide:!1,mahjong100Guide:!1,mahjongFinalQuest:!1,poker50Guide:!1,poker100Guide:!1,pokerFinalQuest:!1}),[r,n]=(0,l.useState)(!0);return((0,l.useEffect)(()=>{n(!0),e?(console.log("User:",e),z(e.uid).then(e=>{console.log("Fetched badge data:",e),s(e),n(!1)}).catch(e=>{console.error("Error fetching user badge:",e),n(!1)})):n(!1)},[e]),r)?(0,t.jsx)("div",{className:"flex mt-40 items-center justify-center",children:(0,t.jsx)(v.P.spinner,{className:"h-20 w-20 animate-spin"})}):(0,t.jsxs)("div",{className:"flex h-full w-full flex-col",children:[(0,t.jsxs)("div",{className:"row flex flex gap-4 p-4",children:[(0,t.jsxs)(C.Zb,{children:[(0,t.jsxs)(C.Ol,{children:[(0,t.jsx)(C.ll,{children:"Chess 50%"}),(0,t.jsx)(C.SZ,{children:"Complete 50% of Chess Guide"})]}),(0,t.jsx)(C.aY,{children:a.chess50Guide?(0,t.jsxs)(d.Avatar,{className:"h-24 w-24",children:[(0,t.jsx)(d.AvatarImage,{src:"/img/knightbadge.png"}),(0,t.jsx)(d.AvatarFallback,{children:"CN"})]}):(0,t.jsxs)(F,{children:[(0,t.jsx)(G,{children:(0,t.jsxs)(d.Avatar,{className:"h-24 w-24",children:[(0,t.jsx)(d.AvatarImage,{src:"/img/noknightbadge.png"}),(0,t.jsx)(d.AvatarFallback,{children:"CN"})]})}),(0,t.jsx)(S,{className:"p-2 w-17",children:"Locked"})]})})]}),(0,t.jsxs)(C.Zb,{children:[(0,t.jsxs)(C.Ol,{children:[(0,t.jsx)(C.ll,{children:"Chess 100%"}),(0,t.jsx)(C.SZ,{children:"Complete 100% of Chess Guide"})]}),(0,t.jsx)(C.aY,{children:a.chess100Guide?(0,t.jsxs)(d.Avatar,{className:"h-24 w-24",children:[(0,t.jsx)(d.AvatarImage,{src:"/img/rookbadge.png"}),(0,t.jsx)(d.AvatarFallback,{children:"CN"})]}):(0,t.jsxs)(F,{children:[(0,t.jsx)(G,{children:(0,t.jsxs)(d.Avatar,{className:"h-24 w-24",children:[(0,t.jsx)(d.AvatarImage,{src:"/img/norookbadge.png"}),(0,t.jsx)(d.AvatarFallback,{children:"CN"})]})}),(0,t.jsx)(S,{className:"p-2 w-17",children:"Locked"})]})})]}),(0,t.jsxs)(C.Zb,{children:[(0,t.jsxs)(C.Ol,{children:[(0,t.jsx)(C.ll,{children:"Chess Final Quest"}),(0,t.jsx)(C.SZ,{children:"Complete Chess Final Quest"})]}),(0,t.jsx)(C.aY,{children:a.chessFinalQuest?(0,t.jsxs)(d.Avatar,{className:"h-24 w-24",children:[(0,t.jsx)(d.AvatarImage,{src:"/img/queenbadge.png"}),(0,t.jsx)(d.AvatarFallback,{children:"CN"})]}):(0,t.jsxs)(F,{children:[(0,t.jsx)(G,{children:(0,t.jsxs)(d.Avatar,{className:"h-24 w-24",children:[(0,t.jsx)(d.AvatarImage,{src:"/img/noqueenbadge.png"}),(0,t.jsx)(d.AvatarFallback,{children:"CN"})]})}),(0,t.jsx)(S,{className:"p-2 w-17",children:"Locked"})]})})]})]}),(0,t.jsxs)("div",{className:"row flex flex gap-4 p-4",children:[(0,t.jsxs)(C.Zb,{children:[(0,t.jsxs)(C.Ol,{children:[(0,t.jsx)(C.ll,{children:"Mahjong 50%"}),(0,t.jsx)(C.SZ,{children:"Complete 50% of Mahjong Guide"})]}),(0,t.jsx)(C.aY,{children:a.mahjong50Guide?(0,t.jsxs)(d.Avatar,{className:"h-24 w-24",children:[(0,t.jsx)(d.AvatarImage,{src:"/img/baibanbadge.png"}),(0,t.jsx)(d.AvatarFallback,{children:"CN"})]}):(0,t.jsxs)(F,{children:[(0,t.jsx)(G,{children:(0,t.jsxs)(d.Avatar,{className:"h-24 w-24",children:[(0,t.jsx)(d.AvatarImage,{src:"/img/nobaibanbadge.png"}),(0,t.jsx)(d.AvatarFallback,{children:"CN"})]})}),(0,t.jsx)(S,{className:"p-2 w-17",children:"Locked"})]})})]}),(0,t.jsxs)(C.Zb,{children:[(0,t.jsxs)(C.Ol,{children:[(0,t.jsx)(C.ll,{children:"Mahjong 100%"}),(0,t.jsx)(C.SZ,{children:"Complete 100% of Mahjong Guide"})]}),(0,t.jsx)(C.aY,{children:a.mahjong100Guide?(0,t.jsxs)(d.Avatar,{className:"h-24 w-24",children:[(0,t.jsx)(d.AvatarImage,{src:"/img/zhongbadge.png"}),(0,t.jsx)(d.AvatarFallback,{children:"CN"})]}):(0,t.jsxs)(F,{children:[(0,t.jsx)(G,{children:(0,t.jsxs)(d.Avatar,{className:"h-24 w-24",children:[(0,t.jsx)(d.AvatarImage,{src:"/img/nozhongbadge.png"}),(0,t.jsx)(d.AvatarFallback,{children:"CN"})]})}),(0,t.jsx)(S,{className:"p-2 w-17",children:"Locked"})]})})]}),(0,t.jsxs)(C.Zb,{children:[(0,t.jsxs)(C.Ol,{children:[(0,t.jsx)(C.ll,{children:"Mahjong Final Quest"}),(0,t.jsx)(C.SZ,{children:"Complete Mahjong Final Quest"})]}),(0,t.jsx)(C.aY,{children:a.mahjongFinalQuest?(0,t.jsxs)(d.Avatar,{className:"h-24 w-24",children:[(0,t.jsx)(d.AvatarImage,{src:"/img/fabadge.png"}),(0,t.jsx)(d.AvatarFallback,{children:"CN"})]}):(0,t.jsxs)(F,{children:[(0,t.jsx)(G,{children:(0,t.jsxs)(d.Avatar,{className:"h-24 w-24",children:[(0,t.jsx)(d.AvatarImage,{src:"/img/nofabadge.png"}),(0,t.jsx)(d.AvatarFallback,{children:"CN"})]})}),(0,t.jsx)(S,{className:"p-2 w-17",children:"Locked"})]})})]})]}),(0,t.jsxs)("div",{className:"row flex flex gap-4 p-4",children:[(0,t.jsxs)(C.Zb,{children:[(0,t.jsxs)(C.Ol,{children:[(0,t.jsx)(C.ll,{children:"Poker 50%"}),(0,t.jsx)(C.SZ,{children:"Complete 50% of Poker Guide"})]}),(0,t.jsx)(C.aY,{children:a.poker50Guide?(0,t.jsxs)(d.Avatar,{className:"h-24 w-24",children:[(0,t.jsx)(d.AvatarImage,{src:"/img/queencardbadge.png"}),(0,t.jsx)(d.AvatarFallback,{children:"CN"})]}):(0,t.jsxs)(F,{children:[(0,t.jsx)(G,{children:(0,t.jsxs)(d.Avatar,{className:"h-24 w-24",children:[(0,t.jsx)(d.AvatarImage,{src:"/img/noqueencardbadge.png"}),(0,t.jsx)(d.AvatarFallback,{children:"CN"})]})}),(0,t.jsx)(S,{className:"p-2 w-17",children:"Locked"})]})})]}),(0,t.jsxs)(C.Zb,{children:[(0,t.jsxs)(C.Ol,{children:[(0,t.jsx)(C.ll,{children:"Poker 100%"}),(0,t.jsx)(C.SZ,{children:"Complete 100% of Poker Guide"})]}),(0,t.jsx)(C.aY,{children:a.poker100Guide?(0,t.jsxs)(d.Avatar,{className:"h-24 w-24",children:[(0,t.jsx)(d.AvatarImage,{src:"/img/kingbadge.png"}),(0,t.jsx)(d.AvatarFallback,{children:"CN"})]}):(0,t.jsxs)(F,{children:[(0,t.jsx)(G,{children:(0,t.jsxs)(d.Avatar,{className:"h-24 w-24",children:[(0,t.jsx)(d.AvatarImage,{src:"/img/nokingbadge.png"}),(0,t.jsx)(d.AvatarFallback,{children:"CN"})]})}),(0,t.jsx)(S,{className:"p-2 w-17",children:"Locked"})]})})]}),(0,t.jsxs)(C.Zb,{children:[(0,t.jsxs)(C.Ol,{children:[(0,t.jsx)(C.ll,{children:"Poker Final Quest"}),(0,t.jsx)(C.SZ,{children:"Complete Poker Final Quest"})]}),(0,t.jsx)(C.aY,{children:a.pokerFinalQuest?(0,t.jsxs)(d.Avatar,{className:"h-24 w-24",children:[(0,t.jsx)(d.AvatarImage,{src:"/img/acebadge.png"}),(0,t.jsx)(d.AvatarFallback,{children:"CN"})]}):(0,t.jsxs)(F,{children:[(0,t.jsx)(G,{children:(0,t.jsxs)(d.Avatar,{className:"h-24 w-24",children:[(0,t.jsx)(d.AvatarImage,{src:"/img/noacebadge.png"}),(0,t.jsx)(d.AvatarFallback,{children:"CN"})]})}),(0,t.jsx)(S,{className:"p-2 w-17",children:"Locked"})]})})]})]})]})}S.displayName=A.VY.displayName;var P=s(3102),Q=s(7135),Z=s(2218);let Y=c.fC,R=c.xz,O=c.x8,q=c.h_,L=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(c.aV,{className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...l,ref:a})});L.displayName=c.aV.displayName;let V=(0,Z.j)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),_=l.forwardRef((e,a)=>{let{side:s="right",className:l,children:r,...n}=e;return(0,t.jsxs)(q,{children:[(0,t.jsx)(L,{}),(0,t.jsxs)(c.VY,{ref:a,className:(0,i.cn)(V({side:s}),l),...n,children:[r,(0,t.jsxs)(c.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,t.jsx)(o.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});_.displayName=c.VY.displayName;let D=e=>{let{className:a,...s}=e;return(0,t.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-2 text-center sm:text-left",a),...s})};D.displayName="SheetHeader";let U=e=>{let{className:a,...s}=e;return(0,t.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...s})};U.displayName="SheetFooter";let E=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(c.Dx,{ref:a,className:(0,i.cn)("text-lg font-semibold text-foreground",s),...l})});E.displayName=c.Dx.displayName;let M=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(c.dk,{ref:a,className:(0,i.cn)("text-sm text-muted-foreground",s),...l})});M.displayName=c.dk.displayName;var T=s(6780);function H(){let[e,a]=l.useState(!1),[s,r]=l.useState(""),[d,c]=l.useState(!1),[o,h]=l.useState(""),{updateUsername:u,changePassword:m,upload:x,logOut:f,user:j,logIn:g}=(0,b.a)(),[p,v]=l.useState(""),[w,y]=l.useState(""),[k,C]=l.useState(""),[A,F]=(0,l.useState)(null),[G,S]=(0,l.useState)("No file selected");async function z(e){e.preventDefault(),a(!0),s.length<1&&(h("username"),c(!0),1)||(await u(s),r(""),Z()),a(!1)}async function I(e){e.preventDefault(),a(!0);try{let e=j.email;console.log("i have not login"),await g(e,p),console.log("i have login"),function(){let e="",a=/[!@#$%^&*(),.?":{}|<>_\-+=\[\]\\\/]/;return w!==k?e="mismatch":w===p?e="same":w.length<8?e="length":/\d/.test(w)||a.test(w)?/\d/.test(w)?a.test(w)||(e="special"):e="number":e="both",!e||(h(e),c(!0),!1)}()&&(await m(p,w),f())}catch(e){console.log(e.code),"auth/invalid-login-credentials"==e.code&&(console.log("isvalid returns an error"),h("wrong credentials"),c(!0))}finally{a(!1)}}function Z(){h("success"),c(!0)}return(0,t.jsxs)("div",{children:[(0,t.jsxs)(Y,{children:[(0,t.jsx)(R,{asChild:!0,children:(0,t.jsxs)(N.z,{className:(0,i.cn)((0,N.d)({variant:"ghost",className:"flex w-full justify-start rounded-sm bg-transparent text-black shadow-none hover:bg-blue-300"})),children:[(0,t.jsx)(n.default,{src:"/img/settings_icon.jpg",alt:"Settings",width:20,height:5,className:"mr-2"}),"Settings"]})}),(0,t.jsxs)(_,{children:[(0,t.jsxs)(D,{children:[(0,t.jsx)(E,{children:"Update username"}),(0,t.jsx)(M,{children:"Username must be at least 1 character long."})]}),(0,t.jsx)("div",{className:"grid gap-4 py-4",children:(0,t.jsx)("div",{className:"grid w-full grid-cols-4 items-center gap-4",children:(0,t.jsx)(P.I,{id:"username",placeholder:"Username",type:"username",autoCapitalize:"none",autoComplete:"username",autoCorrect:"off",disabled:e,value:s,onChange:e=>r(e.target.value),className:"col-span-4",required:!0})})}),(0,t.jsx)(U,{children:(0,t.jsx)(O,{asChild:!0,children:(0,t.jsx)(N.z,{type:"submit",onClick:z,children:"Save changes"})})}),(0,t.jsx)("div",{className:"mb-2 mt-4 border-t border-gray-300"}),(0,t.jsxs)(D,{children:[(0,t.jsx)(E,{children:"Update password"}),(0,t.jsxs)(M,{children:["Password must be at least 8 characters long, including 1 number, and 1 special character.",(0,t.jsx)("br",{}),(0,t.jsx)("br",{}),"You will be logged out if successful."]})]}),(0,t.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,t.jsx)("div",{className:"grid grid-cols-4 items-center gap-4",children:(0,t.jsx)(P.I,{id:"Current Password",placeholder:"Current Password",type:"password",autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",disabled:e,value:p,onChange:e=>v(e.target.value),className:"col-span-4",required:!0})}),(0,t.jsx)("div",{className:"grid grid-cols-4 items-center gap-4",children:(0,t.jsx)(P.I,{id:"New Password",placeholder:"New Password",type:"password",autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",disabled:e,value:w,onChange:e=>y(e.target.value),className:"col-span-4",required:!0})}),(0,t.jsx)("div",{className:"grid grid-cols-4 items-center gap-4",children:(0,t.jsx)(P.I,{id:"Confirm password",placeholder:"Confirm Password",type:"password",autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",disabled:e,value:k,onChange:e=>C(e.target.value),className:"col-span-4",required:!0})})]}),(0,t.jsx)(U,{children:(0,t.jsx)(O,{asChild:!0,children:(0,t.jsx)(N.z,{type:"submit",onClick:I,children:"Save changes"})})}),(0,t.jsx)("div",{className:"mb-2 mt-4 border-t border-gray-300"}),(0,t.jsxs)(D,{children:[(0,t.jsx)(E,{children:"Update profile picture"}),(0,t.jsx)(M,{children:"Please upload valid image files only."})]}),(0,t.jsx)("div",{className:"grid gap-4 py-4",children:(0,t.jsxs)("div",{className:"grid w-full grid-cols-5 items-center gap-4",children:[(0,t.jsxs)("div",{className:"col-span-2",children:[(0,t.jsx)("input",{type:"file",id:"fileInput",onChange:function(e){if(e.target.files&&e.target.files[0].size>1048576){h("size"),c(!0),e.target.value="",S("No file selected");return}e.target.files&&e.target.files[0]&&(F(e.target.files[0]),S(e.target.files[0].name),e.target.value="")},accept:".jpg,.png",style:{display:"none"}}),(0,t.jsx)("label",{htmlFor:"fileInput",className:"cursor-pointer rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-black shadow transition-colors hover:bg-gray-300",children:"Choose File"})]}),(0,t.jsxs)("div",{className:"flex flex-row col-span-3 items-center",children:[(0,t.jsx)(Q._,{children:G}),(0,t.jsx)(N.z,{onClick:()=>{F(null),S("No file selected")},className:(0,i.cn)((0,N.d)({variant:"ghost",className:"flex items-center justify-center rounded-full bg-white text-black shadow-none hover:text-red-500 ml-2"})),children:"X"})]})]})}),(0,t.jsx)(U,{children:(0,t.jsx)(O,{asChild:!0,children:(0,t.jsx)(N.z,{type:"submit",onClick:function(e){e.preventDefault(),a(!0);try{x(A),S("No file selected"),Z()}catch(e){console.error(e)}finally{a(!1)}},children:"Save changes"})})})]})]}),(0,t.jsx)(T.aR,{open:d,onOpenChange:c,children:(0,t.jsxs)(T._T,{children:[(0,t.jsxs)(T.fY,{children:[(0,t.jsxs)(T.f$,{children:["success"===o&&"Success!","username"===o&&"Username does not meet requirements","size"===o&&"File uploaded does not meet requirements","username"!==o&&"success"!==o&&"size"!==o&&"Password does not meet requirements"]}),(0,t.jsxs)(T.yT,{children:["username"===o&&"Username must be at least 1 character long.","mismatch"===o&&"Please ensure that the passwords you entered match before continuing.","length"===o&&"New Password must be at least 8 characters long.","number"===o&&"New Password must include at least 1 number.","special"===o&&"New Password must include at least 1 special character.","both"===o&&"New Password must include at least 1 number and 1 special character.","same"===o&&"Current password and new password cannot be the same.","wrong credentials"===o&&"Please ensure that the current password you have entered is correct.","size"===o&&"Please ensure that the file you have uploaded is less than 1MB.","success"===o&&"Your changes have been saved."]})]}),(0,t.jsx)(T.xo,{children:(0,t.jsx)(T.OL,{children:"Continue"})})]})})]})}var $=s(6506);let B=l.forwardRef((e,a)=>{let{className:s,value:l,...r}=e;return(0,t.jsx)($.fC,{ref:a,className:(0,i.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",s),...r,children:(0,t.jsx)($.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(l||0),"%)")}})})});function X(){let{user:e}=(0,b.a)(),[a,s]=(0,l.useState)({xp:0,level:1});return(0,l.useEffect)(()=>{e&&s({xp:e.xp%100,level:1+Math.floor(e.xp/100)})},[e]),(0,t.jsxs)(F,{children:[(0,t.jsx)(G,{children:(0,t.jsxs)("div",{className:" flex flex-row items-center justify-center px-4 pb-2",children:[(0,t.jsxs)("span",{className:"whitespace-nowrap text-sm text-black",children:["Level ",a.level]}),(0,t.jsx)(B,{value:a.xp,className:"ml-4 w-full border border-black shadow-lg"})]})}),(0,t.jsxs)(S,{className:"p-2 w-24 text-nowrap",children:[a.xp," / 100"]})]})}B.displayName=$.fC.displayName;let J=e=>{let{children:a,className:s,...c}=e,{logOut:o,user:m}=(0,b.a)(),[x,y]=(0,l.useState)("/img/default.png"),[k,C]=(0,l.useState)(!0),A=async e=>{e.preventDefault(),await o(),window.location.href="/pages/login"};return((0,l.useEffect)(()=>{null!==m.session&&(!1===m.session?(0,w.redirect)("/pages/login"):(m.profilePicture&&y(m.profilePicture),C(!1)))},[m]),k)?(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white",children:(0,t.jsx)(v.P.spinner,{className:"h-20 w-20 animate-spin"})}):(0,t.jsxs)("div",{className:(0,i.cn)("fixed left-0 top-0 flex h-full w-full max-w-[13rem] shrink-0 flex-col border-r border-gray-300",s),...c,children:[(0,t.jsxs)("div",{className:"flex flex-col border-b border-gray-300",children:[(0,t.jsx)(r.default,{className:"px-4 py-2 text-3xl font-semibold text-black",href:"/pages/dashboard",children:"Guidance"}),(0,t.jsxs)(h,{children:[(0,t.jsxs)(u,{children:[(0,t.jsxs)("div",{className:"flex flex-row items-center px-4 pb-3",children:[(0,t.jsxs)(d.Avatar,{className:"h-[3rem] w-[3rem]",children:[(0,t.jsx)(d.AvatarImage,{src:x,alt:"User"}),(0,t.jsx)(d.AvatarFallback,{})]}),(0,t.jsx)("span",{className:"overflow-wrap break-word text-rg ml-4 hyphens-auto text-black",children:m.username})]}),(0,t.jsx)(X,{})]}),(0,t.jsx)(f,{className:"max-w-screen-md w-full h-auto md:h-4/5 p-6 overflow-y-auto",children:(0,t.jsxs)(j,{children:[(0,t.jsx)(g,{className:"text-3xl",children:"Badge Inventory"}),(0,t.jsx)(p,{children:(0,t.jsx)(I,{})})]})})]})]}),a,(0,t.jsxs)("div",{className:"border-t border-gray-300 px-2 py-2",children:[(0,t.jsx)(H,{}),(0,t.jsxs)(N.z,{onClick:A,className:(0,i.cn)((0,N.d)({variant:"ghost",className:"flex w-full justify-start rounded-sm bg-gray-100 text-red-600 shadow-none hover:bg-red-300"})),children:[(0,t.jsx)(n.default,{src:"/img/power_icon.jpg",alt:"Settings",width:20,height:5,className:"mr-2"}),"Log Out"]})]})]})},W=e=>{let{children:a,className:s,style:l,...r}=e;return(0,t.jsx)("div",{className:(0,i.cn)("h-full",s),style:l,...r,children:a})}}}]);