(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{7610:function(e,a,i){Promise.resolve().then(i.bind(i,510)),Promise.resolve().then(i.t.bind(i,936,23)),Promise.resolve().then(i.t.bind(i,8877,23))},510:function(e,a,i){"use strict";i.d(a,{AuthContextProvider:function(){return c},a:function(){return d}});var t=i(7437),n=i(2265),l=i(9555),s=i(8969),u=i(3705),r=i(9116);let o=(0,n.createContext)({}),d=()=>(0,n.useContext)(o),c=e=>{let{children:a}=e,[i,d]=(0,n.useState)({email:null,uid:null,username:null,session:null,profilePicture:null,xp:null});(0,n.useEffect)(()=>{let e=(0,l.Aj)(s.I,async e=>{if(e){let a=(0,u.JU)(s.db,"xp",e.uid),i=(await (0,u.QT)(a)).data();d({email:e.email,uid:e.uid,username:e.displayName,session:!0,profilePicture:e.photoURL,xp:null==i?void 0:i.xp})}else d({email:null,uid:null,username:null,session:!1,profilePicture:null,xp:null})});return()=>e()},[]);let c=s.I.currentUser,p=(0,r.cF)(),f=async(e,a)=>{let i=(await (0,l.Xb)(s.I,e,a)).user;if(i){let e=(0,u.pl)((0,u.JU)(s.db,"badges",i.uid),{chess50Guide:!1,chess100Guide:!1,chessFinalQuest:!1,mahjong50Guide:!1,mahjong100Guide:!1,mahjongFinalQuest:!1,poker50Guide:!1,poker100Guide:!1,pokerFinalQuest:!1}),a=(0,u.pl)((0,u.JU)(s.db,"rating",i.uid),{chessRating:"400",attempts:3,puzzleID:1,noOfCorrect:0,latestDate:new Date().toLocaleDateString()}),t=(0,u.pl)((0,u.JU)(s.db,"xp",i.uid),{xp:0}),n=(0,u.pl)((0,u.JU)(s.db,"chessguide",i.uid),{lastChapter:1});await Promise.all([e,a,t,n])}},m=async e=>{c&&(await (0,l.ck)(c,{displayName:e}).catch(e=>console.log(e)),d({email:i.email,uid:i.uid,username:e,session:!0,profilePicture:i.profilePicture,xp:i.xp}))},h=async(e,a)=>{if(c&&i.email){let t=l.w9.credential(i.email,e);await (0,l.aF)(c,t),await (0,l.gQ)(c,a).catch(e=>console.log(e))}},b=async()=>await (0,l.w7)(s.I),g=async e=>{if(c){let a=(0,r.iH)(p,"profilePicture/"+c.uid+".jpg");await (0,r.KV)(a,e);let t=await (0,r.Jt)(a);(0,l.ck)(c,{photoURL:t}),d({email:i.email,uid:i.uid,username:i.username,session:!0,profilePicture:t,xp:i.xp})}},w=async e=>{if(c){let a=(0,u.JU)(s.db,"xp",c.uid),t=(await (0,u.QT)(a)).data(),n=(null==t?void 0:t.xp)+e;await (0,u.pl)(a,{xp:n}),d({email:i.email,uid:i.uid,username:i.username,session:!0,profilePicture:i.profilePicture,xp:n})}},x=async e=>{if(c){let a=(0,u.JU)(s.db,"chessguide",c.uid),i=(await (0,u.QT)(a)).data();if(i)return i.lastChapter>e?i.lastChapter:(await (0,u.pl)(a,{lastChapter:e}),e);await (0,u.pl)(a,{lastChapter:e})}},y=async e=>{if(c){let a=(0,u.JU)(s.db,"badges",c.uid);await (0,u.r7)(a,{[e]:!0})}},_=async()=>{if(c){let e=(0,u.JU)(s.db,"badges",c.uid),a=(await (0,u.QT)(e)).data();if(a)return a.chess100Guide}};return(0,t.jsx)(o.Provider,{value:{user:i,signUp:f,logIn:(e,a)=>(0,l.e5)(s.I,e,a),logOut:b,updateUsername:m,changePassword:h,upload:g,addXp:w,updateChessChapter:x,updateBadge:y,checkGuide:_},children:a})}},8969:function(e,a,i){"use strict";i.d(a,{I:function(){return r},db:function(){return u}});var t=i(2860),n=i(3705),l=i(9555);let s=(0,t.ZF)({apiKey:"***REMOVED***",authDomain:"guidance-a7165.firebaseapp.com",projectId:"guidance-a7165",storageBucket:"guidance-a7165.appspot.com",messagingSenderId:"153691782315",appId:"1:153691782315:web:9acf354f061ae722020bee",measurementId:"G-RWGPHX31D"}),u=(0,n.ad)(s),r=(0,l.v0)(s)},8877:function(){},936:function(e){e.exports={style:{fontFamily:"'__Inter_aaf875', '__Inter_Fallback_aaf875'",fontStyle:"normal"},className:"__className_aaf875"}}},function(e){e.O(0,[232,106,37,810,971,23,744],function(){return e(e.s=7610)}),_N_E=e.O()}]);