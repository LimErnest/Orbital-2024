(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[553],{7489:function(e,s,l){Promise.resolve().then(l.bind(l,9452))},9452:function(e,s,l){"use strict";l.r(s),l.d(s,{default:function(){return j}});var n=l(7437),a=l(4005),c=l(2265),t=l(495),i=l(7440),r=l(6013),d=l(1254),x=l(8969),h=l(3705),o=l(510),u=l(1647),f=l(8884);async function m(e){let s=(0,h.JU)(x.db,"badges",e),l=await (0,h.QT)(s);return l.exists()?{chessFinalQuest:l.data().chessFinalQuest}:(console.log("No such document!"),{chessFinalQuest:!1})}function j(){let e=d[1100],{user:s,updateBadge:l,addXp:x}=(0,o.a)(),[h,j]=(0,c.useState)(1),[v,N]=(0,c.useState)(e[h+94]),[p,F]=(0,c.useState)(!1);(0,c.useEffect)(()=>{s&&m(s.uid).then(e=>{console.log("Fetched badge data:",e),F(e.chessFinalQuest)}).catch(e=>console.error("Error fetching user badge:",e))},[s]);let w=()=>{j(1),N(b)},g=h+1,E=e[g+94],b=e[95],z=async()=>{g>5&&(F(!0),l("chessFinalQuest"),x(200))};return(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)(f.ChessSidebar,{highlightedLink:"final"}),p?(0,n.jsxs)("div",{className:"flex flex-col items-center text-4xl h-screen w-full mt-20",children:[(0,n.jsx)("h1",{children:"CONGRAULATIONS YOU HAVE PASSED THE CHESS FINAL QUEST \uD83C\uDF89"}),(0,n.jsx)("div",{className:"flex flex-col items-center",children:(0,n.jsxs)(u.Avatar,{className:"mt-5 h-48 w-48",children:[(0,n.jsx)(u.AvatarImage,{src:"/img/queenbadge.png"}),(0,n.jsx)(u.AvatarFallback,{children:"CN"})]})})]}):(0,n.jsx)(a.L.Root,{puzzle:{fen:v.FEN,moves:v.Moves,makeFirstMove:!0},children:(0,n.jsxs)("div",{className:"flex flex-row h-screen w-full overflow-hidden p-10",children:[(0,n.jsx)("div",{className:"w-1/2",children:(0,n.jsx)(a.L.Board,{})}),(0,n.jsx)("div",{className:"flex justify-center h-1/2 w-full sm:w-2/5 p-4 sm:p-10",children:(0,n.jsxs)(r.Zb,{className:"w-full",children:[(0,n.jsxs)(r.Ol,{children:[(0,n.jsxs)(r.ll,{className:"flex justify-center text-4xl",children:["Final Quest #",h]}),(0,n.jsx)(r.SZ,{className:"flex justify-center",children:"Complete all 5 puzzles to earn your final quest badge!"})]}),(0,n.jsx)(r.aY,{children:(0,n.jsxs)("div",{className:"flex flex-row justify-center",children:[(0,n.jsx)("div",{className:"px-4",children:(0,n.jsx)(a.L.Reset,{asChild:!0,puzzle:{fen:b.FEN,moves:b.Moves,makeFirstMove:!0},onReset:()=>{w()},showOn:["failed"],children:(0,n.jsx)(t.z,{className:(0,i.cn)((0,t.d)({size:"xl"}),"px-8 py-4 text-xl"),children:"Try Again"})})}),(0,n.jsx)("div",{className:"",children:(0,n.jsx)(a.L.Reset,{asChild:!0,onReset:()=>{j(g),z(),N(E)},puzzle:{fen:null==E?void 0:E.FEN,moves:null==E?void 0:E.Moves,makeFirstMove:!0},showOn:["solved"],children:(0,n.jsx)(t.z,{className:(0,i.cn)((0,t.d)({size:"xl"}),"px-8 py-4 text-xl"),children:"Next"})})})]})})]})})]})})]})}}},function(e){e.O(0,[106,37,364,866,149,810,103,173,942,5,154,695,410,971,23,744],function(){return e(e.s=7489)}),_N_E=e.O()}]);