(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[303],{7772:function(e,s,t){Promise.resolve().then(t.bind(t,5702))},5702:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return j}});var a=t(7437),l=t(6648),i=t(7138),n=t(4005),r=t(2265),c=t(9415),o=t(495),d=t(7440),h=t(6013),u=t(1254),f=t(8969),m=t(3705),x=t(510);async function g(e){let s=(0,m.JU)(f.db,"rating",e),t=await (0,m.QT)(s);if(!t.exists())return console.log("No such document!"),{chessRating:"400",attempts:0,puzzleID:1,noOfCorrect:0,lastestDate:new Date().toLocaleDateString()};{let e=t.data();return{chessRating:e.chessRating,attempts:e.attempts,puzzleID:e.puzzleID,noOfCorrect:e.noOfCorrect,latestDate:e.latestDate}}}function j(){let{user:e,addXp:s}=(0,x.a)(),[t,j]=(0,r.useState)("600"),[p,N]=(0,r.useState)(0),[v,w]=(0,r.useState)(1),[b,z]=(0,r.useState)(0),[y,D]=(0,r.useState)([]),[R,S]=(0,r.useState)(u[t][v]),k=new Date().toLocaleDateString();(0,r.useEffect)(()=>{e&&g(e.uid).then(e=>{console.log("Fetched badge data:",e),j(e.chessRating),N(e.attempts),w(e.puzzleID),z(e.noOfCorrect),S(u[e.chessRating][e.puzzleID-1]),console.log(e.latestDate),console.log(k),O(e.latestDate),console.log("user is changed")}).catch(e=>console.error("Error fetching user badge:",e))},[e]);let C=async()=>{let s=p-1;if(N(s),e){let t=(0,m.JU)(f.db,"rating",e.uid);await (0,m.r7)(t,{attempts:s})}},O=async s=>{if(s!=k&&(N(3),e)){let s=(0,m.JU)(f.db,"rating",e.uid);await (0,m.r7)(s,{attempts:3,latestDate:k})}},_=async()=>{let s=t,a=v+1,l=b+1;if(l>=3&&(1100>Number(t)&&["400","500","600","700","800","900","1000","1100"].includes(s=String(Number(t)+100))&&(j(s),a=1),l=0),w(a),z(l),e){let t=(0,m.JU)(f.db,"rating",e.uid);await (0,m.r7)(t,{puzzleID:a,noOfCorrect:l,chessRating:s}),console.log("doc is updated")}};(0,r.useEffect)(()=>{let e=u[t];D(e),S(e[v-1]),console.log("rating is changed")},[t]);let E=y[v+1-1];return 2==b&&"1100"!=t&&(E=u[String(Number(t)+100)][0]),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("div",{className:"h-full w-full max-w-[13rem] shrink-0",children:(0,a.jsx)(c.Sidebar,{className:"bg-gray-100",children:(0,a.jsxs)(c.SidebarSection,{className:"px-2 py-2",children:[(0,a.jsxs)(i.default,{href:"/pages/dashboard",className:(0,d.cn)((0,o.d)({variant:"ghost",className:"flex justify-start rounded-sm hover:bg-blue-300"})),children:[(0,a.jsx)(l.default,{src:"/img/home_icon.jpg",alt:"Home",width:30,height:10,className:"mr-2"}),"Home"]}),(0,a.jsxs)(i.default,{href:"/pages/chess-guide",className:(0,d.cn)((0,o.d)({variant:"ghost",className:"flex justify-start rounded-sm hover:bg-blue-300"})),children:[(0,a.jsx)(l.default,{src:"/img/pawn_icon.jpg",alt:"Chess",width:30,height:10,className:"mr-2"}),"Guide"]}),(0,a.jsxs)(i.default,{href:"/pages/chess-daily",className:(0,d.cn)((0,o.d)({variant:"ghost",className:"flex w-full justify-start rounded-sm bg-blue-300 hover:bg-blue-300"})),children:[(0,a.jsx)(l.default,{src:"/img/pawn_icon.jpg",alt:"Chess-DailyQuiz",width:30,height:10,className:"mr-2"}),"Daily Quiz"]}),(0,a.jsxs)(i.default,{href:"/pages/coming-soon",className:(0,d.cn)((0,o.d)({variant:"ghost",className:"flex justify-start rounded-sm hover:bg-blue-300"})),children:[(0,a.jsx)(l.default,{src:"/img/pawn_icon.jpg",alt:"Poker",width:30,height:10,className:"mr-2"}),"Leaderboard"]}),(0,a.jsxs)(i.default,{href:"/pages/chess-finalQuest",className:(0,d.cn)((0,o.d)({variant:"ghost",className:"flex justify-start rounded-sm hover:bg-blue-300"})),children:[(0,a.jsx)(l.default,{src:"/img/pawn_icon.jpg",alt:"Poker",width:30,height:10,className:"mr-2"}),"Final Quest"]})]})})}),0==p?(0,a.jsx)("div",{className:"flex justify-center text-4xl h-screen w-full",children:(0,a.jsx)("h1",{className:"py-20",children:"You have no attempts left come back again tomorrow"})}):(0,a.jsx)(n.L.Root,{puzzle:{fen:R.FEN,moves:R.Moves,makeFirstMove:!0},children:(0,a.jsxs)("div",{className:"flex flex-row h-screen w-full overflow-hidden p-10",children:[(0,a.jsx)("div",{className:"w-1/2",children:(0,a.jsx)(n.L.Board,{})}),(0,a.jsx)("div",{className:"flex justify-center h-1/2 w-full sm:w-2/5 p-4 sm:p-10",children:(0,a.jsxs)(h.Zb,{className:"w-full",children:[(0,a.jsx)(h.Ol,{children:(0,a.jsxs)(h.ll,{className:"flex justify-center text-4xl",children:["Daily Quiz #",v," ",t," Rating"]})}),(0,a.jsx)(h.aY,{children:(0,a.jsxs)("div",{className:"flex flex-row justify-center",children:[(0,a.jsx)("div",{className:"",children:(0,a.jsx)(n.L.Reset,{asChild:!0,puzzle:{fen:R.FEN,moves:R.Moves,makeFirstMove:!0},showOn:["in-progress"],children:(0,a.jsx)(o.z,{className:(0,d.cn)((0,o.d)({size:"xl"}),"px-8 py-4 text-xl"),children:"Restart"})})}),(0,a.jsx)("div",{className:"px-4",children:(0,a.jsx)(n.L.Reset,{asChild:!0,puzzle:{fen:R.FEN,moves:R.Moves,makeFirstMove:!0},onReset:()=>{C()},showOn:["failed"],children:(0,a.jsx)(o.z,{className:(0,d.cn)((0,o.d)({size:"xl"}),"px-8 py-4 text-xl"),children:"Try Again"})})}),(0,a.jsx)("div",{className:"",children:(0,a.jsx)(n.L.Reset,{asChild:!0,onReset:()=>{S(E),_()},puzzle:{fen:E.FEN,moves:E.Moves,makeFirstMove:!0},showOn:["solved"],children:(0,a.jsx)(o.z,{className:(0,d.cn)((0,o.d)({size:"xl"}),"px-8 py-4 text-xl"),children:"Next"})})})]})}),(0,a.jsxs)(h.eW,{className:"flex justify-center",children:["You have ",p," attempts left",(0,a.jsx)("br",{})]}),(0,a.jsx)(h.eW,{className:"flex justify-center",children:"If the first move is not played, please refresh the page"})]})})]})})]})}}},function(e){e.O(0,[106,37,364,866,149,810,103,173,942,5,154,415,254,971,23,744],function(){return e(e.s=7772)}),_N_E=e.O()}]);